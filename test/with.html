<html>
 <head>
  <script>
function log() {
    d= document.createElement('div')
    d.innerHTML = [].join.call(arguments, " ");
    document.body.appendChild(d);
}


function time(f, i) {
    var start = new Date()
    for (var j = 0; j < i; ++j) {
        f();
    }
    log(f.name, new Date() - start);
}


function simpleWith() {
   with({x: 3}) {
   var y = x;
   }
}

function simple() {
    var y = 3;
}

var enclosedSimple = (function() {
    return function enclosedSimple() {
        var y = 3;
    }
})()

function unusedWith() {
   with({x: 3}) {
      var y = 3;
   }
}

function noopWith() {
   with({}) {
   }
}

function noop() {

}

var enclosedNoop = (function() {
    return function enclosedNoop() {

    }
})()

var withEnclosedNoop;
with({}) {
  (function() {
    withEnclosedNoop = function withEnclosedNoop() {
    }
  })();
}

var simpleWithEnclosed;
with({x: 3}) {
  (function() {
    simpleWithEnclosed = function simpleWithEnclosed() {
        var y = x;
    }
  })();
}


onload = function() {
  time(simple, 100000);
  time(simpleWith, 100000);
  time(enclosedSimple, 100000);
  time(simpleWithEnclosed, 100000);
  time(unusedWith, 100000);
  time(noop, 100000);
  time(noopWith, 100000);
  time(enclosedNoop, 100000);
  time(withEnclosedNoop, 100000);
}

</script>
</head>
<body>
 <h1>Time with execution</h1>
</body>
</html>
